# Check for emergency bypass
if [ "$HUSKY_SKIP_HOOKS" = "1" ] || [ "$EMERGENCY_BYPASS" = "1" ]; then
  echo "ðŸš¨ SECURITY HOOKS BYPASSED - EMERGENCY MODE"
  echo "   Reason should be documented in emergency bypass log"
  exit 0
fi

# Start performance monitoring
yarn perf-monitor start pre-commit

# Run lint-staged
if npx lint-staged; then
  yarn clean-compile
  yarn perf-monitor end true
else
  yarn perf-monitor end false
  exit 1
fi
